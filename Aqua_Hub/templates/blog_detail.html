{% extends 'newindex.html' %}

{% block body %}
<div class="container my-5">
    <h2 class="text-center">{{ blog.title }}</h2>
    <p>Posted by {{ blog.author.username }} on {{ blog.created_at }}</p>

    <!-- Blog Image -->
    {% if blog.image %}
    <div class="text-center my-4">
        <img src="{{ blog.image.url }}" alt="{{ blog.title }}" class="img-fluid rounded" style="max-height: 400px; object-fit: cover;">
    </div>
    {% endif %}

    <!-- Blog Content -->
    <div class="content">
        <p>{{ blog.content }}</p>
    </div>

    <hr>

    <!-- Comments Section -->
    <h4>Comments</h4>
    <div class="comments-section">
        {% for comment in blog.comments.all %}
            <div class="comment">
                <strong>{{ comment.user.username }}</strong>: {{ comment.content }} <br>
                <small class="text-muted">{{ comment.created_at }}</small>
            </div>
            <hr>
        {% empty %}
            <p>No comments yet.</p>
        {% endfor %}
    </div>

    <!-- Add a Comment -->
    <h5>Add a Comment</h5>
    <form method="POST" action="{% url 'add_comment' blog.id %}">
        {% csrf_token %}
        <div class="mb-3">
            <textarea name="content" class="form-control" rows="3" placeholder="Enter your comment here..." required></textarea>
        </div>
        <button type="submit" class="btn btn-primary">Post Comment</button>
    </form>
</div>
{% endblock %}
